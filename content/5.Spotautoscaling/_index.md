---
title: "实验二：EKS弹性扩展+Spot使用动手实践"
chapter: false
weight: 50
---
### EKS弹性扩展+Spot使用动手实践
#### Auto Scaling（规模自动伸缩）
AWS良好架构框架中的成本优化支柱，通过专门的章节讨论了“供需匹配”这部分内容，相关建议如下：

“……（供需匹配）可通过Auto Scaling实现，它可以帮助您根据定义的条件自动扩展或缩减EC2实例和Spot Fleet的容量。”
因此，在Kubernetes集群上进行成本优化的先决条件是确保您已经在集群之上使用了Cluster Autoscaler。这款工具能够在Kubernetes集群中执行两项关键功能：第一，它会监控集群中那些由于资源分配不足而无法正常运行的Pod。一旦出现这样的情况，Cluster Autoscaler都会自动更新Amazon EC2 弹性伸缩组，从而在集群当中增加一定数量的节点。第二，Cluster Autoscaler会检测资源利用率较低的节点，并将其中的Pod调度到其他节点之上。接下来，Cluster Autoscaler会自动缩减Auto Scaling组所需的节点数量，实现集群规模缩减。
#### 竞价实例（Spot 实例）
通过自动扩缩集群中节点及Pod，正确调整分配给Pod中容器的资源的大小，缩减业务时段以外的部署规模，并将大部分Pod转移至竞价实例，能够为Kubernetes集群节省超过80％的EC2实例成本。
竞价实例（Spot 实例）让您可以利用 AWS 云中未使用的 EC2 容量，建议用于无状态、容错且灵活的应用程序。例如，Spot 实例非常适合大数据、容器化工作负载、CI/CD、无状态 Web 服务器、高性能计算 (HPC) 和渲染工作负载。
在运行时，Spot 实例与按需实例完全相同，Spot 实例中断和容量可能会随着时间的推移而发生变化，因为 Spot 实例可用性根据供需关系而发生变化，过去的性能并不能保证将来的结果。 
